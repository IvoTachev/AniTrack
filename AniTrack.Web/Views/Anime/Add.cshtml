@using static AniTrack.GCommon.ApplicationConstants
@model AniTrack.Web.ViewModels.Anime.AddAnimeFormModel

@{
    ViewData["Title"] = "Add New Anime";

    bool airDateExist = DateOnly.TryParse(Model!.AirDate, out DateOnly airDate);
    string airDateString = airDateExist ? airDate.ToString(ApplicationDateFormat) : string.Empty;
    bool endDateExist = DateOnly.TryParse(Model!.EndDate, out DateOnly endDate);
    string endDateString = endDateExist ? endDate.ToString(ApplicationDateFormat) : string.Empty;

}


<form method="post">
    <fieldset>
        <legend>Add Anime</legend>

        <div class="mb-3">
            <label asp-for="Title" class="form-label"></label>
            <input asp-for="Title" class="form-control" type="text" placeholder="Enter the Anime Title" />
            <span asp-validation-for="Title" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label asp-for="Episodes" class="form-label"></label>
            <input asp-for="Episodes" class="form-control" type="number" placeholder="Enter the number of Episodes" />
            <span asp-validation-for="Episodes" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label asp-for="AirDate" class="form-label"></label>
            <input asp-for="AirDate" class="form-control" type="date"/>
            <span asp-validation-for="AirDate" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label asp-for="EndDate" class="form-label"></label>
            <input asp-for="EndDate" class="form-control" type="date"/>
            <span asp-validation-for="EndDate" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label asp-for="Synopsis" class="form-label"></label>
            <textarea asp-for="Synopsis" class="form-control" placeholder="Enter the Anime Synopsis" rows="3"> </textarea>
            <span asp-validation-for="Synopsis" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label asp-for="ImageUrl" class="form-label"></label>
            <input asp-for="ImageUrl" class="form-control" placeholder="Enter the anime poster URL" />
            <span asp-validation-for="ImageUrl" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label class="form-label">Genres</label>
            <div>
                @foreach (var genre in Model!.AvailableGenres)
                {
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="checkbox" name="SelectedGenreIds" value="@genre.Id" />
                        <label class="form-check-label">@genre.Name</label>
                    </div>
                }
            </div>
        </div>

        <button type="submit" class="btn btn-primary">Add Anime</button>
    </fieldset>
</form>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
